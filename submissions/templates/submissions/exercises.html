{% extends 'submissions/courses.html' %}

{% load bootstrap4 %}

{% load django_bootstrap_breadcrumbs %}
{% block breadcrumbs %}
  {{ block.super }}
  {% breadcrumb "Tehtävät" "submissions:exercises" course_id=course_id %}
{% endblock %}

{% block content %}
  <div class="col-md-8">
  
  
  
    <h1> Arvosteltavat tehtävät </h1>
    
    {% if exercises %}
      <ul class="list-group exercises">
        {% for exercise in exercises %}
          <li class="list-group-item {{ exercise.exercise_id }}">
          
            <div class="d-flex align-items-center">
            
              <div class="flex-grow-1">
                  {{ exercise }}
              </div>
              
              

                <div class="ml-auto">

                  <a class="btn btn-primary btn-sm" href="{% url 'submissions:grading' exercise.exercise_id %}" role="button">
                    Omat arvosteltavat
                  </a>

                  <a class="btn btn-primary btn-sm" href="{% url 'submissions:submissions' exercise.exercise_id %}" role="button">
                    Kaikki arvosteltavat
                  </a>

                  {% if user_is_teacher %}
                  <a class="btn btn-primary btn-sm" href="{% url 'submissions:grading_off' course_id exercise.exercise_id %}" role="button">
                    Peruuta tarkastus
                  </a>
                  {% endif %}

                </div>

              
            </div> <!-- d-flex -->
           
            
          </li>
        {% endfor %}
      </ul>
    {% else %}
    <div class="alert alert-info" role="alert">
      Yhtään tehtävää ei ole vielä lisätty.
    </div>
      
    {% endif %}
  </div>

  <div class="col-md-4">

    {% if user_is_teacher %}
      <h1> Lisää tehtäviä arvosteluun </h1>
      
      <a class="btn btn-primary" href="{% url 'submissions:update_exercise_list' course_id %}" role="button">Päivitä kurssin sisältö</a>

      <form action="{% url 'submissions:grading_on' course_id %}" method="post" class="form" enctype="multipart/form-data">
        {% csrf_token %}
        {% bootstrap_form form %}
        <button type="submit" class="btn btn-primary">Lisää</button>
      </form>

    {% endif %}

  </div> <!-- column -->
{% endblock %}

    <!--
      {% if other_exercises %}
        <ul class="list-group all_exercises">
          {% for exercise in other_exercises%}
            <li class="list-group-item {{ exercise.exercise_id }}">
            
            
              <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                 {{ exercise }}
                </div>
                <div class="ml-auto">
                  <button class="btn btn-primary btn-sm" type="button" data-toggle="collapse" data-target="#{{ exercise.exercise_id }}">
                    Lisää tehtävä arvosteluun
                  </button>
                </div>
              </div> <!-- d-flex -->
               
              <!--
              <div class="collapse mt-4" id="{{ exercise.exercise_id }}">
                <div class="card card-body">
                  <form action="{% url 'submissions:grading_on' course_id exercise.exercise_id %}" method="post" class="form" enctype="multipart/form-data">
                    {% csrf_token %}
                    {% bootstrap_form exercise.form %}
                    <button type="submit" class="btn btn-primary">Lisää</button>
                  </form>
                </div>
              </div> <!-- collapse -->
              
       <!--
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="alert alert-info" role="alert">
          Yhtään tehtävää ei löytynyt. Hae tehtäviä valitsemalla "Päivitä kurssin sisältö".
        </div>
      {% endif %} -->
